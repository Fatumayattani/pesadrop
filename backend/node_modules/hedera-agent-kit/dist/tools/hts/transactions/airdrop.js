"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.airdrop_token = void 0;
const sdk_1 = require("@hashgraph/sdk");
const airdrop_token = async (tokenId, recipients, client) => {
    const tx = new sdk_1.TokenAirdropTransaction();
    // Add token transfers for each recipient
    for (const recipient of recipients) {
        // Deduct from sender
        tx.addTokenTransfer(tokenId, client.operatorAccountId, -recipient.amount);
        // Add to recipient
        tx.addTokenTransfer(tokenId, recipient.accountId, recipient.amount);
    }
    const txResponse = await tx.freezeWith(client).execute(client);
    const receipt = await txResponse.getReceipt(client);
    const txStatus = receipt.status;
    if (!txStatus.toString().includes('SUCCESS'))
        throw new Error("Token Airdrop Transaction failed");
    return {
        status: txStatus.toString(),
        txHash: txResponse.transactionId.toString(),
    };
};
exports.airdrop_token = airdrop_token;
//# sourceMappingURL=airdrop.js.map